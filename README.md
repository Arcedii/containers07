# Лабораторная работа: Разработка Web-приложения на базе PHP

## Цель работы

Изучение структуры и принципов работы веб-приложений на PHP, включая работу с базой данных, шаблонами и тестирование. Настройка автоматического запуска тестов с помощью GitHub Actions.

## Задание

Разработать веб-приложение на PHP, используя следующие компоненты:

- Класс Database для работы с базой данных SQLite.
- Класс Page для управления страницами и шаблонами.
- HTML-шаблон страницы (index.tpl).
- CSS-стили (style.css).
- Файл конфигурации (config.php).
  Разработать структуру базы данных и заполнить ее тестовыми данными.
  Написать код для отображения страницы с данными из базы данных.
  Создать тесты для проверки корректной работы приложения.
  Настроить автоматический запуск тестов с помощью GitHub Actions.

## Описание выполнения работы

1. **Создание структуры приложения**:

   - Создана директория `site` для хранения компонентов приложения.
   - В директории `modules` созданы файлы `database.php` и `page.php`, содержащие классы `Database` и `Page`.
   - В директории `templates` создан файл `index.tpl` с HTML-шаблоном страницы.
   - В директории `styles` создан файл `style.css` с CSS-стилями.
   - Созданы файлы `config.php` и `index.php` для конфигурации и запуска приложения.

2. **Разработка структуры базы данных**:

   - Создана таблица `page` в базе данных SQLite.
   - Таблица содержит поля `id` (первичный ключ), `title` (заголовок страницы) и `content` (текст страницы).
   - В таблицу добавлены тестовые данные:
     - Page 1: Content 1
     - Page 2: Content 2
     - Page 3: Content 3

3. **Написание кода для отображения страницы**:

   - В файле `index.php` подключены необходимые модули и файл конфигурации.
   - Созданы объекты классов `Database` и `Page`.
   - Данные из базы данных получены с помощью метода `Read` класса `Database`.
   - Данные переданы в шаблон страницы с помощью метода `SetData` класса `Page`.
   - Шаблон страницы отображен с помощью метода `Render` класса `Page`.

4. **Создание тестов**:

   - В директории `tests` создан файл `testframework.php` с вспомогательными функциями для работы с тестами.
   - В файле `tests.php` созданы тесты для проверки методов классов `Database` и `Page`.
   - Тесты проверяют корректное подключение к базе данных, чтение, создание, обновление и удаление данных.

5. **Настройка автоматического запуска тестов**:
   - В файле `.github/workflows/main.yml` создан workflow для автоматического запуска тестов.
   - Workflow запускается при push в ветку `main`.
   - Workflow выполняет следующие действия:
     - Скачивает код приложения.
     - Собирает Docker-образ.
     - Запускает Docker-контейнер с приложением.
     - Копирует тесты в контейнер.
     - Запускает тесты в контейнере.
     - Останавливает контейнер.
     - Удаляет контейнер.

## Ответы на вопросы

1. **Что такое непрерывная интеграция?**
   Непрерывная интеграция (CI) - это практика автоматизации сборки, тестирования и развертывания программного обеспечения. CI позволяет разработчикам чаще вносить изменения в код и быстрее выявлять ошибки.

2. **Для чего нужны юнит-тесты? Как часто их нужно запускать?**
   Юнит-тесты нужны для:

   - Повышения качества кода.
   - Обнаружения ошибок на ранней стадии разработки.
   - Снижения затрат на исправление ошибок.
     Юнит-тесты следует запускать как можно чаще, например, при каждом коммите кода.

3. **Что нужно изменить в файле `.github/workflows/main.yml` для того, чтобы тесты запускались при каждом создании запроса на слияние (Pull Request)?**
   Необходимо добавить событие `pull_request` в раздел `on` файла `.github/workflows/main.yml`.

4. **Что нужно добавить в файл `.github/workflows/main.yml` для того, чтобы удалять созданные образы после выполнения тестов?**
   Необходимо добавить шаг для удаления контейнера после выполнения тестов.
